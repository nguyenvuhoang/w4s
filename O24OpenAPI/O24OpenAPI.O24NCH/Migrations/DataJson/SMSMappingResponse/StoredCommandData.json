[
  {
    "type": "header",
    "command": "Export data to Json"
  },
  {
    "exported_time": "2025-08-11T15:09:50.3937191Z",
    "host": "localhost:5090",
    "db_properties": [
      {
        "name": "server",
        "value": "server=192.168.1.102"
      },
      {
        "name": "port",
        "value": "1433"
      },
      {
        "name": "database",
        "value": "NCH"
      },
      {
        "name": "entity",
        "value": "StoredCommand"
      }
    ],
    "exported_by_fields": [
      {
        "additionalProp1": "string",
        "additionalProp2": "string",
        "additionalProp3": "string"
      }
    ]
  },
  {
    "type": "data",
    "data": [
      {
        "Name": "GetDbFunctions",
        "Query": "SELECT\r\n    SCHEMA_NAME(o.schema_id) COLLATE DATABASE_DEFAULT + '.' + o.[name] COLLATE DATABASE_DEFAULT AS [ObjectName],\r\n    CASE o.[type]\r\n        WHEN 'P' THEN 'Stored Procedure'\r\n        WHEN 'FN' THEN 'Scalar Function'\r\n        WHEN 'TF' THEN 'Table Function'\r\n        WHEN 'IF' THEN 'Inline Table Function'\r\n    END AS [ObjectType],\r\n    'USE O24CMS' + CHAR(13) + CHAR(10) +\r\n    'GO' + CHAR(13) + CHAR(10) +\r\n    'IF OBJECT_ID(''' + SCHEMA_NAME(o.schema_id) COLLATE DATABASE_DEFAULT + '.' +\r\n    o.[name] COLLATE DATABASE_DEFAULT + ''', ''' + o.[type] COLLATE DATABASE_DEFAULT + ''') IS NOT NULL ' +\r\n    'DROP ' +\r\n    CASE o.[type]\r\n        WHEN 'P' THEN 'PROCEDURE '\r\n        WHEN 'FN' THEN 'FUNCTION '\r\n        WHEN 'TF' THEN 'FUNCTION '\r\n        WHEN 'IF' THEN 'FUNCTION '\r\n    END +\r\n    SCHEMA_NAME(o.schema_id) COLLATE DATABASE_DEFAULT + '.' +\r\n    o.[name] COLLATE DATABASE_DEFAULT + ';' + CHAR(13) + CHAR(10) +\r\n    'GO' + CHAR(13) + CHAR(10) +\r\n    m.[definition] COLLATE DATABASE_DEFAULT + CHAR(13) + CHAR(10) +\r\n    'GO' AS [Script]\r\nFROM\r\n    sys.sql_modules m\r\nINNER JOIN\r\n    sys.objects o ON m.object_id = o.object_id\r\nWHERE\r\n    o.[type] IN ('P', 'FN', 'TF', 'IF')\r\n    AND SCHEMA_NAME(o.schema_id) = 'dbo'\r\nORDER BY\r\n    o.[type], o.[name];\r\n",
        "Type": "Query",
        "Description": "GetDbFunctions",
        "CreatedOnUtc": "2025-07-17T07:22:31",
        "UpdatedOnUtc": "2025-07-17T07:22:31",
        "id": 1
      },
      {
        "Name": "smssettingview",
        "Query": "SELECT (\r\n    SELECT \r\n        p.Id AS id,\r\n        p.ProviderName AS providername,\r\n        p.ApiUrl AS apiurl,\r\n        p.CountryPrefix AS countryprefix,\r\n        ISNULL(p.AllowedPrefix,'') AS allowedprefix,\r\n        p.ApiUsername AS apiusername,\r\n        ISNULL(p.ApiPassword, '') AS apipassword,\r\n        ISNULL(p.ApiKey, '') AS apikey,\r\n        p.IsActive AS isactive,\r\n        p.BrandName AS brandname,\r\n        ISNULL(s.IsOnline, 0) AS isonline,\r\n\r\n        (\r\n            SELECT \r\n                pc.ConfigKey AS configKey,\r\n                pc.ConfigValue AS configValue,\r\n                ISNULL(pc.Description, '') AS description,\r\n\t\t\t\tpc.IsActive AS isactive\r\n            FROM dbo.SMSProviderConfig pc\r\n            WHERE pc.SMSProviderId = p.ProviderName\r\n            FOR JSON PATH\r\n        ) AS smsproviderconfig\r\n\r\n    FROM dbo.SMSProvider p\r\n    OUTER APPLY (\r\n        SELECT TOP 1 s.IsOnline\r\n        FROM dbo.SMSProviderStatus s\r\n        WHERE s.ProviderId = p.ProviderName\r\n        ORDER BY s.CheckTime DESC\r\n    ) s\r\n    WHERE \r\n        (\r\n            TRY_CAST(@id AS INT) IS NOT NULL AND p.Id = TRY_CAST(@id AS INT)\r\n        )\r\n    FOR JSON PATH, WITHOUT_ARRAY_WRAPPER\r\n) AS Result;",
        "Type": "SELECT",
        "Description": null,
        "CreatedOnUtc": "2025-07-17T07:22:31",
        "UpdatedOnUtc": "2025-07-17T07:22:31",
        "id": 2
      },
      {
        "Name": "SimpleSearchSMSSendOut",
        "Query": "SELECT (\r\n    SELECT \r\n        S.Id AS id,\r\n        S.PhoneNumber AS phonenumber,\r\n        S.MessageContent AS messagecontent,\r\n        DATEADD(HOUR, 7, S.SentAt) AS sentat,\r\n        S.Status AS status,\r\n        S.RequestMessage AS requestmessage,\r\n        S.ResponseMessage AS responsemessage,\r\n        S.SMSProviderId AS smsproviderid,\r\n        S.OtpRequestId AS otprequestid,\r\n        S.ProviderMsgId AS providermsgid,\r\n        S.ElapsedMilliseconds AS elapsedmilliseconds,\r\n        S.RetryCount AS retrycount,\r\n        S.IsResend AS isresend,\r\n        COUNT(*) OVER () AS TotalCount\r\n    FROM dbo.SMSSendOut S\r\n    WHERE\r\n        (@phonenumber = '' OR S.PhoneNumber LIKE '%' + @phonenumber + '%')\r\n        AND (@providername = 'ALL' OR S.SMSProviderId = @providername)\r\n        AND (\r\n            NULLIF(@fromdate, '') IS NULL OR NULLIF(@todate, '') IS NULL\r\n            OR (\r\n                S.SentAt >= DATEADD(HOUR, -7, CONVERT(DATETIME, CONVERT(DATE, TRY_CONVERT(DATETIME, @fromdate, 103))))\r\n                AND S.SentAt <  DATEADD(HOUR, -7, DATEADD(DAY, 1, CONVERT(DATETIME, CONVERT(DATE, TRY_CONVERT(DATETIME, @todate, 103)))))\r\n            )\r\n        )\r\n\t\t\t\tAND (@status = 'ALL' OR S.Status = @status)\r\n    ORDER BY \r\n        S.Id DESC\r\n    OFFSET @Offset ROWS\r\n    FETCH NEXT @PageSize ROWS ONLY\r\n    FOR JSON PATH\r\n) AS Result;\r\n",
        "Type": "SELECT",
        "Description": null,
        "CreatedOnUtc": "2025-07-17T07:22:31",
        "UpdatedOnUtc": "2025-07-17T07:22:31",
        "id": 3
      },
      {
        "Name": "SimpleSearchSMSProvider",
        "Query": "SELECT (\r\n    SELECT \r\n        P.Id AS id,\r\n        P.ProviderName AS providername,\r\n        P.ApiUrl AS apiurl,\r\n        P.CountryPrefix AS countryprefix,\r\n        P.AllowedPrefix AS allowedprefix,\r\n        P.ApiUsername AS apiusername,\r\n        P.ApiPassword AS apipassword,\r\n        P.IsActive AS isactive,\r\n        P.BrandName AS brandname,\r\n        COUNT(*) OVER () AS TotalCount\r\n    FROM dbo.SMSProvider P\r\n    WHERE (\r\n        @searchtext IS NULL OR @searchtext = ''\r\n        OR P.ProviderName LIKE '%' + @searchtext + '%'\r\n        OR P.ApiUrl LIKE '%' + @searchtext + '%'\r\n        OR P.CountryPrefix LIKE '%' + @searchtext + '%'\r\n        OR P.AllowedPrefix LIKE '%' + @searchtext + '%'\r\n        OR P.ApiUsername LIKE '%' + @searchtext + '%'\r\n        OR P.BrandName LIKE '%' + @searchtext + '%'\r\n    )\r\n    ORDER BY P.Id DESC\r\n    OFFSET @Offset ROWS\r\n    FETCH NEXT @PageSize ROWS ONLY\r\n    FOR JSON PATH\r\n) AS Result;\r\n",
        "Type": "SELECT",
        "Description": null,
        "CreatedOnUtc": "2025-07-17T07:22:31",
        "UpdatedOnUtc": "2025-07-17T07:22:31",
        "id": 4
      },
      {
        "Name": "SimpleSearchSMSMappingResponse",
        "Query": "SELECT (\r\n    SELECT \r\n        M.Id AS id,\r\n        M.ProviderName AS providername,\r\n        M.ResponseCode AS responsecode,\r\n        M.ResponseDescription AS responsedescription,\r\n        M.IsSuccess AS issuccess,\r\n        M.IsFallback AS isfallback,\r\n        M.MsgTemplate AS msgtemplate,\r\n        M.ServiceType AS servicetype,\r\n        M.DateCreated AS datecreated,\r\n        M.DateUpdated AS dateupdated,\r\n        M.CreatedBy AS createdby,\r\n        M.UpdatedBy AS updatedby,\r\n        COUNT(*) OVER () AS TotalCount\r\n    FROM dbo.SMSMappingResponse M\r\n    WHERE (\r\n        @searchtext IS NULL OR @searchtext = ''\r\n        OR M.ProviderName LIKE '%' + @searchtext + '%'\r\n        OR M.ResponseCode LIKE '%' + @searchtext + '%'\r\n        OR M.ResponseDescription LIKE '%' + @searchtext + '%'\r\n        OR M.ServiceType LIKE '%' + @searchtext + '%'\r\n    )\r\n    ORDER BY M.Id DESC\r\n    OFFSET @Offset ROWS\r\n    FETCH NEXT @PageSize ROWS ONLY\r\n    FOR JSON PATH\r\n) AS Result;\r\n",
        "Type": "SELECT",
        "Description": null,
        "CreatedOnUtc": "2025-07-25T14:53:39",
        "UpdatedOnUtc": "2025-07-25T14:53:42",
        "id": 6
      }
    ]
  }
]